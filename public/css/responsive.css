/* for the mobile devices */
@media screen and (max-width: 768px) {
    #main-container {
        background-color: #7F8C8D;
    }

    #app-outer-wrapper {
        flex: 100;
        height: 100%;
        background-color: #CCC;
    }

    #ai-actor-wrapper {
        width: 80%;
    }

    #chat-history-container {
        position: fixed;
        min-width: 100%;
        transition: all 0.3s ease;
        overflow-y: auto;
        z-index: 999;
        padding-bottom:100px;
    }

    /* Adjust position and style of toggle-chat-topic button on mobile */
    #toggle-chat-topic {
        bottom: 100px;
        top: unset;
        left: 0px;
        width: 32px;
        height: 32px;
        background-color: rgba(51, 51, 51, 0.8);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }
    
    #toggle-chat-topic i {
        font-size: 14px;
    }

    .action-button-group {
        display: block;
    }

    #chat-container {
        padding: 0;
        width: 100%;
        margin: 0;
        border: 0;
        box-shadow: 0;
    }

    #app-name {
        font-size: 1em;
    }

    #messages {
        width: 100%;
        padding: 0.5em;
    }

    .message {
        padding: 1em;
        margin-bottom: 0.5em;
        margin-right: 0;
        border-radius: 0.5em;
    }

    .message ol,
    .message ul {
        margin-top: 1em;
        margin-bottom: 1em;
    }

    .message li:not(.menu-item) {
        margin-bottom: 0.5em;
        margin-left: 2em;
    }

    .mini-toolbar {
        font-size: 12px;
    }

    .btn .btn-text {
        display: none;
    }

    #clear-input {
        right: 8px;
        top: 8px;
        padding: 5px;
        background-color: unset;
        color: #666;
        border-radius: 5px;
        bottom: unset;
        width: fit-content;
        height: fit-content;
        left:unset;
        position: absolute;
    }

    textarea {
        max-width: 100%;
        margin-right: 0px;
        padding: 5px 10px 5px 5px;
    }

    #message-input {
        border-radius: 5px 5px 0 0;
        padding: 5px;
        border: 2px solid #eee;
        padding: 5px 10px 5px 5px;
    }

    #input-container {
        display: flex;
        margin: 0;
        flex-direction: column;
        width: 100%;
        background-color: transparent;
    }

    .text-input-container {
        display: flex;
        align-items: center;
    }

    button#submitButton {
        height: fit-content;
        width: 100% !important;
        position: static !important;
        font-size: 20px;
        border-radius: 0px 0px 0px 0px;
    }

    .button-row {
        display: flex;
        justify-content: space-between;
        flex-direction: row;
        width: 100%;
        gap: 1px;
        background: #333;
        border-radius: 0 0 5px 5px;
        padding: 1px;
        position: static;
    }

    .button-row > * {
        flex: 1;
        height: 34px;
    }

    .button-row button {
        width: 100%;
        margin: 0;
        border-radius: 0 !important;
        background: linear-gradient(to bottom, #505050, #404040);
        border: none;
        border-right: 1px solid #333;
    }

    .button-row button:last-child {
        border-right: none;
    }

    .button-row button i {
        font-size: 16px;
    }

    #voice-input-container,
    #new-chat-container {
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0;
        padding: 0;
    }

    #voice-input-button,
    #new-chat-button {
        width: 100%;
        height: 100%;
    }

    #submitButton {
        background: linear-gradient(to bottom, #4CAF50, #45a049) !important;
    }

    #submitButton:active {
        background: linear-gradient(to bottom, #3d8b40, #357a38) !important;
    }

    #voice-input-button {
        background: linear-gradient(to bottom, #E53935, #D32F2F) !important;
    }

    #voice-input-button:active {
        background: linear-gradient(to bottom, #C62828, #B71C1C) !important;
    }

    #new-chat-button {
        background: linear-gradient(to bottom, #6495ED, #5689E5) !important;
    }

    #new-chat-button:active {
        background: linear-gradient(to bottom, #487CDD, #3A6FD5) !important;
    }

    #new-chat-container,
    #voice-input-container,
    #attachments-container {
        width: 100%;
        font-size: 20px;
        justify-content: center;
    }

    #submitButton,
    #new-chat-button,
    #voice-input-button,
    #attachments-container {
        width: 100% !important;
        position: static !important;
        font-size: 20px;
        border-radius: 0 !important;
        height: fit-content;
    }

    #ai-actor-container {
        position: fixed;
        width: 100%;
    }

    /* Search citation responsive styles */
    .message .citation-tooltip {
        max-width: calc(100vw - 32px);
        left: 16px !important;
        right: 16px;
    }

    .message .search-sources {
        margin-top: 8px;
        font-size: 0.9em;
    }

    .message .source-item {
        gap: 4px;
    }

    .message .source-number {
        min-width: 20px;
    }

    .message .source-item a {
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .message .search-sources {
        margin: var(--spacing-sm) calc(-1 * var(--spacing-sm));
        padding: var(--spacing-sm) var(--spacing-sm) 0;
        font-size: var(--font-size-xs);
    }

    .message .sources-list {
        max-height: 150px;
        overflow-y: auto;
    }

    .message .source-item {
        gap: var(--spacing-xs);
    }

    .message .source-number {
        min-width: 20px;
    }

    .message .source-item a {
        -webkit-line-clamp: 1;
        line-clamp: 1;
        font-size: var(--font-size-xs);
    }

    #web-search-toggle {
        width: 100% !important;
        position: static !important;
        font-size: 20px;
        border-radius: 0 !important;
        height: fit-content;
        background: linear-gradient(to bottom, #4A90E2, #357ABD) !important;
        transition: all 0.2s ease, transform 0.1s ease, filter 0.1s ease;
    }

    #web-search-toggle:active {
        background: linear-gradient(to bottom, #357ABD, #2E6DA4) !important;
        transform: scale(0.98);
        filter: brightness(90%);
        box-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.2);
    }

    #web-search-toggle.active {
        background: linear-gradient(to bottom, #2E7D32, #1B5E20) !important;
    }

    #web-search-toggle.active:active {
        background: linear-gradient(to bottom, #1B5E20, #0D3F10) !important;
        box-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.3);
    }

    /* Hide toggle-layout button on mobile devices */
    #toggle-layout {
        display: none;
    }
}

@media (max-width: 480px) {
    .message .citation {
        display: inline-block;
        margin: 2px 0;
    }

    .message .search-sources details summary {
        font-size: 0.9em;
    }

    .message .sources-list {
        font-size: 0.85em;
    }

    .message .search-sources summary {
        font-size: var(--font-size-xs);
    }

    .message .sources-list {
        max-height: 120px;
    }

    .message .source-item {
        line-height: 1.3;
    }
}

/* iPad Layout */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 1) {
    .message-input-container {
        position: absolute;
        bottom: 4em;
    }
}

@media print {
    .message .search-sources {
        page-break-inside: avoid;
        break-inside: avoid;
    }

    .message .sources-list {
        max-height: none;
    }
}